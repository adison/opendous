#summary Additional Testing Results from the Upconverter Project

PAGE UNDER CONSTRUCTION 

= Prototypes =

The [Upconverter] project went through a couple prototype phases:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Prototype1-Small.jpg

The second prototype more closely resembles the production boards:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Prototype2.jpg


= PCB Testing =

The standard 2-layer [http://en.wikipedia.org/wiki/FR-4 FR4] 1oz. copper PCB from [http://www.myropcb.com/ MyROPCB] was tested with different SMA connectors as well as the production board and a SMA Cable of similar length.  All of these are plots of uncompensated raw data.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing_Hardware.jpg

The following [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing-CONSMA003.062-VNWA_Data.s2p data] plot is of the PCB and [http://www.digikey.com/product-detail/en/CONSMA003.062/CONSMA003.062-ND CONSMA003.062] SMA connectors:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing-CONSMA003.062.jpg

The following [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing-Production_SMA_Connectors-VNWA_Data.s2p data] plot is of the PCB and the production SMA connectors:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing-Production_SMA_Connectors.jpg

The following [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing-SMA_Cable-VNWA_Data.s2p data] plot is of a [http://en.wikipedia.org/wiki/Coaxial_cable#Standards RG-316] coaxial SMA extension cable of similar length.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-PCB_Impedance_Testing-SMA_Cable.jpg

The following [http://code.google.com/p/opendous/source/browse/trunk/Current_Designs/Upconverter/Upconverter_Testing-Passthrough-VNWA_Data.s2p data] plot is of the Upconverter in Passthrough mode:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Passthrough.jpg

The following plot uses the same [http://code.google.com/p/opendous/source/browse/trunk/Current_Designs/Upconverter/Upconverter_Testing-Passthrough-VNWA_Data.s2p data as above] but has been corrected for the length delay of the PCB trace.  Using 165ps/inch=6.5ps/mm as the signal propagation time through copper on FR4 and a 103mm value for trace+connector length.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Passthrough_with_Delay_Corrections.jpg

= Conversion Losses =

The following is the spectrum of a 24MHz oscillator ([http://en.wikipedia.org/wiki/Attenuator_(electronics)#Attenuator_circuits attenuated] and [http://en.wikipedia.org/wiki/DC_block DC-blocked]):

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-24MHz_Breadboard_Clock.jpg

The following is the spectrum of the 24MHz oscillator in Passthrough Mode on the Upconverter:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-24MHz_Breadboard_Clock_Passthrough.jpg

The following is the spectrum of the 24MHz oscillator in Upconvert Mode on the Upconverter.  The filters are doing their job and removing the input signal.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-24MHz_Breadboard_Clock_in_Upconvert_Mode.jpg

The following is the spectrum of the 24MHz oscillator Upconverted to 124MHz:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-24MHz_Breadboard_Clock_Upconverted_to_124MHz.jpg


= Filter Prototyping and Testing =	

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Production_Filter_Testing_Setup.jpg


== Lowpass Filter ==

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype1_Lowpass_Filter-VNWA_Data.s2p

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype1_Lowpass_Filter.jpg

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype2_Lowpass_Filter-VNWA_Data.s2p

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype2_Lowpass_Filter.jpg


== Bandpass Filter ==

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype1_Bandpass_Filter-VNWA_Data.s2p

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype1_Bandpass_Filter.jpg

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype2_Bandpass_Filter-VNWA_Data.s2p

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Prototype2_Bandpass_Filter.jpg



= LO Filter =

== Why a LO Filter is Needed ==

The following is the 19MHz to 26MHz [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-100MHz_Breadboard_Oscillator-VNWA_Data.s1p spectrum] of the 100MHz oscillator.  There is a lot of noise mostly due to the breadboard construction of the test circuit but 20MHz clearly sticks out.  All of these spectrum plots were taken using the longest possible [http://sdr-kits.net/VNWA3_Description.html VNWA3] sweep time.  The VNWA3 is not designed as a spectrum analyzer so the exact values are not precise but the relative peak values are useful. 

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-100MHz_Breadboard_Oscillator.jpg

For comparison here is the 19MHz to 26MHz [http://sdr-kits.net/VNWA3_Description.html VNWA3] spectrum with open RX:

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-Open_RX.jpg

The following is the 19MHz to 26MHz [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-IF_with_LO_Enabled-VNWA_Data.s1p spectrum] at the IF port of the Upconverter with RF shorted with a 50-Ohm load and LO enabled (i.e., in Upconvert mode).  The 20MHz internal LO frequency bleeds through but is significantly attenuated.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-IF_with_LO_Enabled.jpg

The following is the 19MHz to 26MHz [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-RF_with_LO_Enabled-VNWA_Data.s1p spectrum] at the RF port of the Upconverter with IF shorted with a 50-Ohm load and LO enabled (i.e., in Upconvert mode).  The 20MHz internal LO frequency bleeds through but is significantly attenuated.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-19MHz_to_26MHz-RF_with_LO_Enabled.jpg


== LO Filter Prototyping ==

To reduce the internal LO frequency at the output and also help reduce LO harmonics, a [http://en.wikipedia.org/wiki/Bessel_filter Bessel] [http://en.wikipedia.org/wiki/Bandpass band-pass] filter was chosen for its minimal phase distortion to keep the LO signal as clean as possible.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_LO_Filter_Simulation.jpg

The following is a [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Prototype-VNWA_Data.s2p data] plot of the response of the originally designed LO Filter and attenuator.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Prototype.jpg

The following is a [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Prototype_with_LowerQ_L13-VNWA_Data.s2p data] plot of the response of an updated LO Filter and attenuator.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Prototype_with_LowerQ_L13.jpg

Lowering the [http://en.wikipedia.org/wiki/Q_factor#Individual_reactive_components Q value] of the L13 inductor improves gain by 4dB.  Since it shorts signals to ground, the 3.76x greater resistance of the lower Q inductor leads to the greater losses.

{{{
100MHz = 628318530 rad/s
Rl = wL / Q
AIMC-0805-6N8J-T : Rl = (628318530 * 6.8e-9) / 15 = 0.267
AISC-0805-R0068J-T : Rl = (628318530 * 6.8e-9) / 50 = 0.085
PM0805-6N8M-RC : Rl = (628318530 * 6.8e-9) / 60 = 0.071
}}}


== Increasing LO Level ==

From the above, it is clear that if you want to boost your LO level by about 4dB, replace L13 with lower Q inductors such as [http://www.digikey.com/product-detail/en/PM0805-6N8M-RC/M8452CT-ND PM0805-6N8M-RC] or [http://www.digikey.com/product-detail/en/AISC-0805-R0068J-T/535-10488-1-ND AISC-0805-R0068J-T].

The following is a [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Production_Updated_L13_HigherQ-VNWA_Data.s2p data] plot of the response of the production LO filter with a [http://www.digikey.com/product-detail/en/PM0805-6N8M-RC/M8452CT-ND PM0805-6N8M-RC] inductor reworked into L13.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Production_Updated_L13_HigherQ.jpg

You can gain another ~4dB by replacing L1 (47nH) with either a [http://www.digikey.com/product-detail/en/AISC-0805-R047G-T/AISC-0805-R047G-TCT-ND AISC-0805-R047G-T] or [http://www.digikey.com/product-detail/en/PM0805-47NM-RC/M8459CT-ND/ PM0805-47NM-RC].  An additional 0.5dB can be gained by removing R2, the 432 Ohm resistor closest to the LO buffer that makes up half the [http://en.wikipedia.org/wiki/Attenuator_(electronics)#Attenuator_circuits Pi Attenuator].  However, it is not recommended to remove the full attenuator since it and the filter help convert the 12 Ohm output impedance of the CMOS buffer into the 50 Ohm needed by the mixer.

The following [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Production_with_No_L13-VNWA_Data.s2p data] plot for the response of the production filter with no L13 shows you should not just remove it.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-LO_Filter_Production_with_No_L13.jpg


== LO Bleed ==

The following is the 98MHz to 102MHz [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-98MHz_to_102MHz-IF_with_LO_Enabled-VNWA_Data.s1p spectrum] at the IF port of the Upconverter with RF shorted with a 50-Ohm load and LO enabled (Upconvert mode).  The VNWA3 is not designed as a spectrum analyzer so the exact values are not meaningful but the relative peak values are useful.

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-98MHz_to_102MHz-IF_with_LO_Enabled.jpg

The following is the 98MHz to 102MHz [http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-98MHz_to_102MHz-RF_with_LO_Enabled-VNWA_Data.s1p spectrum] at the RF port of the Upconverter with IF shorted with a 50-Ohm load and LO enabled (Upconvert mode).

http://opendous.googlecode.com/svn/trunk/Current_Designs/Upconverter/Upconverter_Testing-Spectrum-98MHz_to_102MHz-RF_with_LO_Enabled.jpg